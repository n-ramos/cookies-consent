<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Cookie Wall Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ========================================================= -->
    <!-- ðŸ” Google Consent Mode v2 â€” Ã©tat par dÃ©faut (NO NETWORK) -->
    <!-- ========================================================= -->
    <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){ dataLayer.push(arguments); }

            gtag('consent', 'default', {
                    'ad_storage': 'denied',
                    'analytics_storage': 'denied',
                    'ad_user_data': 'denied',
                    'ad_personalization': 'denied',
                    'functionality_storage': 'granted',
                    'security_storage': 'granted'
            });
    </script>

    <!-- ========================================================= -->
    <!-- ðŸ”’ Google Tag Manager â€” BLOQUÃ‰ par la CMP                 -->
    <!-- ========================================================= -->
    <script
            type="text/plain"
            data-cookie-category="analytics"
    >
        (function(w,d,s,l,i){
          w[l]=w[l]||[];
          w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
          var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
          j.async=true;
          j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
          f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KZVXMK3K');
    </script>
</head>

<body class="bg-slate-950 text-slate-50">
<div id="app"></div>

<!-- ========================================================= -->
<!-- ðŸš€ Bootstrap CMP via WebComponent                         -->
<!-- ========================================================= -->
<cookie-consent
        config='{
      "version": "1.2.0",
      "storageKey": "demo-cookiewall",
      "categories": [
        {
          "key": "essential",
          "title": "Essentiels",
          "required": true,
          "description": "NÃ©cessaire au fonctionnement du site."
        },
        {
          "key": "analytics",
          "title": "Analytics",
          "description": "Mesure dâ€™audience",
          "googleConsentMode": "analytics_storage"
        }
      ],
      "vendors": {
        "googleConsentMode": { "enabled": true }
      },
      "cookieCleanup": {
        "analytics": ["_ga", "_ga_", "_gid", "_gat", "_gac_", "__utm"]
      },
      "ui": {
        "position": "bottom-left",
        "texts": {
          "title": "ðŸª Gestion des cookies",
          "description": "Nous utilisons des cookies pour amÃ©liorer lâ€™expÃ©rience.",
          "acceptAllLabel": "Tout accepter",
          "rejectAllLabel": "Tout refuser",
          "customizeLabel": "Personnaliser"
        }
      }
    }'
></cookie-consent>

<!-- ========================================================= -->
<!-- ðŸ“¦ Entry JS unique (lib + webcomponent + tailwind)       -->
<!-- ========================================================= -->
<script type="module" src="/src/webcomponent.ts"></script>
</body>
</html>
